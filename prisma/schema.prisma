generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" // Use PostgreSQL as the database provider
  url      = env("DATABASE_URL")
}

// Enum definitions
enum Location {
  NONE
  Location1
  Location2
}

enum Role {
  Staff
  Admin
  Manager
  Veterinarian
}

// User model with PostgreSQL-specific adjustments
model User {
  id             Int       @id @default(autoincrement())
  name           String
  email          String    @unique
  phoneNo        String
  altPhoneNo     String?
  hashedPassword String
}

// Organization model
model Organization {
  id           Int       @id @default(autoincrement())
  orgName      String    @unique
  orgEmail     String
  gstNo        String
  address      String
  state        String
  pincode      String
  description  String
  phoneNo      String
  orgBranches OrgBranch[]
}

// OrgBranch model
model OrgBranch {
  id           Int       @id @default(autoincrement())
  branchName   String
  orgId        Int       // Foreign key to Organization
  org          Organization @relation(fields: [orgId], references: [id])
}

// OrgBranchUserRole model
model OrgBranchUserRole {
  id           Int       @id @default(autoincrement())
  orgBranchId  Int       // Foreign key to OrgBranch
  userId       Int       // Foreign key to User
  role         Role
}

// Inventory model
model Inventory {
  id             Int       @id @default(autoincrement())
  stockChange    String?
  invoiceType    String?
  quantityChange Int?
  receiptNo      Int?
  party          String?
  createdAt      DateTime  @default(now())
  allProductsId  Int?      // Foreign key to AllProducts
  allServicesId  Int?      // Foreign key to AllServices
}

// Finance model
model Finance {
  id          Int       @id @default(autoincrement())
  salesId     Int?      // Foreign key to Sales
  type        String?
  createdAt   DateTime
  purchasesId Int?      // Foreign key to Purchases
  expensesId  Int?      // Foreign key to Expenses
}

// AllProducts model
model AllProducts {
  id            Int       @id @default(autoincrement())
  itemName      String?
  defaultUnit   String?
  hsnCode       String?
  tax           String?
  category      String?
  description   String?
  minStock      Int?
  maxStock      Int?
  distributors  String?
  quantity      Int?
  code          String?
  batchNumber   String?
  costPrice     Int?
  location      Location  @default(NONE)
}

// AllServices model
model AllServices {
  id             Int       @id @default(autoincrement())
  name           String
  sacCode        String?
  description    String?
  sellingPrice   String?
  tax            String?
  category       String?
  quantity       Int?
}

// Sales model
model Sales {
  id              Int       @id @default(autoincrement())
  customer        String
  date            DateTime
  notes           String
  subTotal        Int
  invoiceNo       Int
  dueDate         DateTime
  shipping        Int
  adjustment      Int
  totalCost       Int
  overallDiscount Int
  totalQty        Int
  status          String
}

// Purchases model
model Purchases {
  id                   Int       @id @default(autoincrement())
  distributor          String
  date                 DateTime
  dueDate              DateTime
  returnLastDate       DateTime?
  invoiceNo            String
  purchaseOrderNumber  String?
  distributorInvoiceNo String?
  grnNo                String
  notes                String
  shipping             Int
  adjustment           Int
  totalCost            Int
  totalQty             Int
  status               String
}

// Expenses model
model Expenses {
  id              Int       @id @default(autoincrement())
  party           String
  date            DateTime
  invoiceNo       String?
  subTotal        Int
  overallDiscount Int
  totalCost       Int?
  totalQty        Int?
  startedOn       DateTime?
  recurringType   String?
  recurringEnd    String?
  dueDate         String
  notes           String
  status          String
}

// Transactions model
model Transactions {
  id            Int       @id @default(autoincrement())
  partyName     String?
  subject       String?
  invoiceLink   String?
  receiptNo     String?
  date          DateTime?
  amountPaid    Int
  mode          String?
  moneyChange   String?
  invoiceSource String?
}

// Items model
model Items {
  id            Int       @id @default(autoincrement())
  taxPercent    Int
  taxAmount     Int
  totalAmount   Int
  reasons       String?
  category      String?
  quantity      Int?
  name          String?
  allProductsId Int?      // Foreign key to AllProducts
  salesId       Int?      // Foreign key to Sales
  purchasesId   Int?      // Foreign key to Purchases
  expensesId    Int?      // Foreign key to Expenses
}

// Clients model
model Clients {
  id         Int       @id @default(autoincrement())
  clientName String?
  email      String?
  contact    String?
  address    String?
  city       String?
  pinCode    String?
}

// Patients model
model Patients {
  id          Int       @id @default(autoincrement())
  patientName String?
  clientId    Int?      // Foreign key to Clients
  species     String?
  breed       String?
  dateOfBirth DateTime?
  age         Int?
  gender      String?
  isInpatient Boolean?
}
